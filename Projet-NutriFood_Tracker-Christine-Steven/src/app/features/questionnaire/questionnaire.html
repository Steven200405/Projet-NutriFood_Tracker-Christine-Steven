<mat-card class="container-lg my-4$ p-4 shadow-sm rounded-4">
    <h1 class="fs-1 fw-bold mb-3">Questionnaire</h1>

    <form [formGroup]="formQuestions">
        <h3 class="h5 fw-semibold mb-3">{{ currentQuestion.title }}</h3>
        @switch (currentQuestion.type) {
        @case ("radio") {
        <app-q1-q5 [currentQuestion]="currentQuestion" [currentControl]="getControl(currentQuestion.id)"></app-q1-q5>
        }
        @case ("checkbox") {
        <app-q6 [currentQuestion]="currentQuestion" [currentControl]="getControl(currentQuestion.id)"></app-q6>
        }
        @case ("search") {
        <app-q7 [currentQuestion]="currentQuestion" [previousControl]="getControl('q6')"  [currentControl]="getControl(currentQuestion.id)"></app-q7>
        }
        }
        @if (formQuestions.get(currentQuestion.id)?.touched &&
        formQuestions.get(currentQuestion.id)?.invalid) {
        <div class="alert alert-danger mt-3" role="alert">Sélectionnez au moins une option</div>
        }
        
        <div class="d-flex justify-content-between mt-4">
            <button type="button" class="button-link" (click)="previousQuestion()"
                [disabled]="indexQuestionnaire === 0">
                Précédent
            </button>

            <button type="button" class="button-link "
                (click)="indexQuestionnaire === questions.length - 1 ? submit() : nextQuestion()">
                {{ indexQuestionnaire === questions.length - 1 ? 'Terminer' : 'Suivant' }}
            </button>
        </div>


    </form>
</mat-card>